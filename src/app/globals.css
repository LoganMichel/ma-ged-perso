@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Source+Sans+3:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

:root {
  --ged-primary: #1e3a5f;
  --ged-secondary: #3d7ea6;
  --ged-accent: #f59e0b;
  --ged-surface: #f8fafc;
  --ged-surface-alt: #e2e8f0;
  --ged-border: #cbd5e1;
  --ged-text: #1e293b;
  --ged-text-muted: #64748b;
}

* {
  box-sizing: border-box;
}

html {
  font-family: 'Source Sans 3', system-ui, sans-serif;
}

body {
  @apply bg-ged-surface text-ged-text antialiased;
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height pour iOS */
}

/* PWA standalone mode */
@media (display-mode: standalone) {
  body {
    /* Empêcher le pull-to-refresh sur iOS */
    overscroll-behavior-y: contain;
    /* Safe areas gérées par les composants */
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-ged-surface-alt;
}

::-webkit-scrollbar-thumb {
  @apply bg-ged-border rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-ged-text-muted;
}

/* Selection highlight */
::selection {
  @apply bg-ged-secondary/30;
}

/* Tree view styles */
@layer components {
  .tree-item {
    @apply flex items-center gap-2 px-2 py-1.5 rounded-md cursor-pointer transition-all duration-150;
    @apply hover:bg-ged-surface-alt;
  }

  .tree-item.selected {
    @apply bg-ged-secondary/20 text-ged-primary font-medium;
  }

  .tree-item.active {
    @apply bg-ged-secondary text-white;
  }

  /* Panel styles */
  .panel {
    @apply bg-white border border-ged-border rounded-lg shadow-panel;
  }

  .panel-header {
    @apply px-4 py-2.5 border-b border-ged-border bg-gradient-to-b from-ged-surface to-white;
    @apply font-display font-semibold text-ged-primary text-sm uppercase tracking-wide;
  }

  /* Novaxel-style column header */
  .column-header {
    @apply px-3 py-2 bg-gradient-to-b from-slate-100 to-slate-50 border-b border-ged-border;
    @apply font-display font-semibold text-ged-primary text-xs uppercase tracking-wider;
    @apply flex items-center justify-between;
  }

  /* List item in columns */
  .list-item {
    @apply flex items-center gap-2 px-3 py-2 cursor-pointer transition-all duration-100;
    @apply border-b border-ged-border/50 last:border-b-0;
    @apply hover:bg-ged-accent/10;
  }

  .list-item.selected {
    @apply bg-ged-secondary text-white;
  }

  .list-item.selected:hover {
    @apply bg-ged-secondary/90;
  }

  /* Icon styles */
  .icon-folder {
    @apply text-ged-accent;
  }

  .icon-file {
    @apply text-ged-secondary;
  }

  /* Toolbar styles */
  .toolbar {
    @apply flex items-center gap-1 p-2 bg-gradient-to-b from-slate-50 to-white border-b border-ged-border;
  }

  .toolbar-btn {
    @apply p-2 rounded-md transition-all duration-150;
    @apply hover:bg-ged-surface-alt active:bg-ged-border;
    @apply text-ged-text-muted hover:text-ged-primary;
  }

  .toolbar-btn.active {
    @apply bg-ged-secondary/20 text-ged-secondary;
  }

  /* Status bar */
  .status-bar {
    @apply flex items-center gap-4 px-4 py-2 bg-ged-surface-alt border-t border-ged-border;
    @apply text-xs text-ged-text-muted;
  }

  /* Button styles */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-md font-medium;
    @apply transition-all duration-150 cursor-pointer;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply bg-ged-primary text-white hover:bg-ged-primary/90 active:bg-ged-primary/80;
  }

  .btn-secondary {
    @apply bg-white border border-ged-border text-ged-text;
    @apply hover:bg-ged-surface-alt active:bg-ged-border;
  }

  .btn-icon {
    @apply p-2 rounded-md text-ged-text-muted;
    @apply hover:bg-ged-surface-alt hover:text-ged-primary;
    @apply active:bg-ged-border;
  }

  /* Input styles */
  .input {
    @apply w-full px-3 py-2 rounded-md border border-ged-border bg-white;
    @apply text-ged-text placeholder:text-ged-text-muted/60;
    @apply focus:outline-none focus:ring-2 focus:ring-ged-secondary/30 focus:border-ged-secondary;
    @apply transition-all duration-150;
  }

  /* Modal/Dialog */
  .modal-overlay {
    @apply fixed inset-0 bg-black/50 backdrop-blur-sm z-50;
    @apply flex items-center justify-center p-4;
  }

  .modal-content {
    @apply bg-white rounded-xl shadow-dropdown max-w-lg w-full;
    @apply animate-scale-in;
  }

  /* Context menu */
  .context-menu {
    @apply absolute bg-white rounded-lg shadow-dropdown border border-ged-border py-1 min-w-[180px];
    @apply animate-fade-in z-50;
  }

  .context-menu-item {
    @apply flex items-center gap-3 px-3 py-2 text-sm cursor-pointer;
    @apply hover:bg-ged-surface-alt transition-colors;
  }

  .context-menu-item.danger {
    @apply text-red-600 hover:bg-red-50;
  }

  .context-menu-separator {
    @apply my-1 border-t border-ged-border;
  }

  /* Breadcrumb */
  .breadcrumb {
    @apply flex items-center gap-1 text-sm text-ged-text-muted;
  }

  .breadcrumb-item {
    @apply hover:text-ged-primary cursor-pointer transition-colors;
  }

  .breadcrumb-separator {
    @apply text-ged-border;
  }

  /* Tags */
  .tag {
    @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium;
    @apply bg-ged-secondary/10 text-ged-secondary;
  }
}

/* Animations */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Drag and drop styles */
.drop-zone {
  @apply border-2 border-dashed border-ged-border rounded-lg p-8;
  @apply transition-all duration-200;
}

.drop-zone.active {
  @apply border-ged-secondary bg-ged-secondary/5;
}

/* File preview */
.file-preview {
  @apply relative overflow-hidden rounded-lg bg-ged-surface-alt;
  @apply aspect-[4/3] flex items-center justify-center;
}

.file-preview-overlay {
  @apply absolute inset-0 bg-gradient-to-t from-black/60 to-transparent;
  @apply opacity-0 transition-opacity duration-200;
}

.file-preview:hover .file-preview-overlay {
  @apply opacity-100;
}

/* Animation slide-in pour le panneau de preview */
@keyframes slide-in-right {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.animate-slide-in-right {
  animation: slide-in-right 0.25s ease-out forwards;
}

/* Animation fade-in backdrop */
@keyframes fade-in-backdrop {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.backdrop-blur-sm {
  animation: fade-in-backdrop 0.2s ease-out forwards;
}

/* Animation fade-in générale */
@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-fade-in {
  animation: fade-in 0.2s ease-out forwards;
}

/* Styles responsifs mobile */
@media (max-width: 767px) {
  .column {
    display: none;
  }
  
  .toolbar {
    padding: 0.5rem;
    gap: 0.25rem;
  }
  
  .toolbar-btn {
    padding: 0.5rem;
  }
  
  .modal-content {
    width: 95%;
    max-width: none;
    margin: 1rem;
    max-height: calc(100vh - 2rem);
  }
  
  /* Cache la sidebar sur mobile */
  .sidebar {
    display: none;
  }
}
