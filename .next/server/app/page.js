(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5094:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),s(5480),s(4128),s(5866);var a=s(3191),l=s(8716),r=s(7922),n=s.n(r),i=s(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5480)),"/Users/logan/Sites/ma-ged-perso-frontend/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4128)),"/Users/logan/Sites/ma-ged-perso-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/logan/Sites/ma-ged-perso-frontend/src/app/page.tsx"],m="/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2423:(e,t,s)=>{Promise.resolve().then(s.bind(s,6202))},6202:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eI});var a=s(326),l=s(7577),r=s.n(l);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),d=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var m={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let x=(0,l.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:r="",children:n,iconNode:i,...d},x)=>(0,l.createElement)("svg",{ref:x,...m,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:c("lucide",r),...!n&&!o(d)&&{"aria-hidden":"true"},...d},[...i.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(n)?n:[n]])),h=(e,t)=>{let s=(0,l.forwardRef)(({className:s,...a},r)=>(0,l.createElement)(x,{ref:r,iconNode:t,className:c(`lucide-${n(d(e))}`,`lucide-${e}`,s),...a}));return s.displayName=d(e),s},u=h("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),p=h("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),g=h("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),j=h("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),f=h("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),b=h("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),N=h("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),y=h("file-plus",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]),v=h("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),w=h("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),k=h("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),C=h("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),M=h("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),S=h("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),A=h("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$=h("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),D=h("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),_=h("table-properties",[["path",{d:"M15 3v18",key:"14nvp0"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]]);var O=s(9540),I=s(8069);function z(){let{state:e,dispatch:t,actions:s}=(0,O.q)(),[r,n]=(0,l.useState)(""),[i,d]=(0,l.useState)(!1);(0,l.useRef)(null);let c=(0,l.useRef)(null),o=e=>{t({type:"SET_VIEW_MODE",payload:e})},m=()=>{n(""),s.clearSearch()},x=e=>{d(!1),t({type:"SHOW_MODAL",payload:{type:"create",data:{itemType:e}}})},h=t=>{switch(t){case"armoire":return!0;case"rayon":return!!e.selection.armoire;case"classeur":return!!e.selection.rayon;case"dossier":return!!e.selection.classeur;case"intercalaire":return!!e.selection.dossier;default:return!1}},z=e.intercalaires&&e.intercalaires.length>0,L=!!(e.selection.intercalaire||e.selection.dossier&&!z),q=!!(e.selection.document||e.selection.intercalaire||e.selection.dossier||e.selection.classeur||e.selection.rayon||e.selection.armoire);return(0,a.jsxs)("header",{className:"bg-white border-b border-ged-border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-3 md:px-4 py-2 bg-gradient-to-r from-ged-primary to-ged-secondary",children:[a.jsx("div",{className:"flex items-center gap-2 md:gap-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("img",{src:"/logo-ged-blanc.png",alt:"GED",className:"w-7 h-7 md:w-8 md:h-8"}),(0,a.jsxs)("h1",{className:"text-white font-display font-bold text-lg md:text-xl tracking-tight",children:[a.jsx("span",{className:"hidden sm:inline",children:"Ma GED"}),a.jsx("span",{className:"sm:hidden",children:"GED"}),a.jsx("span",{className:"font-light opacity-80 hidden sm:inline",children:" Perso"})]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-1 md:gap-2",children:[a.jsx("button",{onClick:()=>t({type:"SHOW_MODAL",payload:{type:"manageTags"}}),className:"p-1.5 md:p-2 rounded-md text-white/80 hover:text-white hover:bg-white/10 transition-colors",title:"G\xe9rer les \xe9tiquettes",children:a.jsx(u,{className:"w-5 h-5"})}),(0,a.jsxs)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("show-mobile-favorites"))},className:"p-1.5 md:p-2 rounded-md text-white/80 hover:text-white hover:bg-white/10 transition-colors md:hidden relative",title:"Favoris",children:[a.jsx(p,{className:"w-5 h-5"}),e.favorites.length>0&&a.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-amber-500 rounded-full text-[10px] flex items-center justify-center font-bold",children:e.favorites.length})]}),a.jsx("button",{className:"p-1.5 md:p-2 rounded-md text-white/80 hover:text-white hover:bg-white/10 transition-colors hidden md:block",children:a.jsx(g,{className:"w-5 h-5"})}),a.jsx("button",{className:"p-1.5 md:p-2 rounded-md text-white/80 hover:text-white hover:bg-white/10 transition-colors hidden md:block",children:a.jsx(j,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{className:"toolbar flex-col md:flex-row",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 w-full md:w-auto",children:[(0,a.jsxs)("div",{className:"relative",ref:c,children:[(0,a.jsxs)("button",{onClick:()=>d(!i),className:"btn btn-primary text-sm",children:[a.jsx(f,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Nouveau"}),a.jsx(b,{className:"w-3 h-3 ml-1"})]}),i&&(0,a.jsxs)("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-lg shadow-dropdown border border-ged-border py-1 min-w-[180px] z-50 animate-fade-in",children:[(0,a.jsxs)("button",{onClick:()=>x("armoire"),className:"context-menu-item w-full text-left",children:[a.jsx(N,{className:"w-4 h-4 text-ged-accent"}),"Nouvelle armoire"]}),(0,a.jsxs)("button",{onClick:()=>x("rayon"),className:`context-menu-item w-full text-left ${h("rayon")?"":"opacity-50 cursor-not-allowed"}`,disabled:!h("rayon"),children:[a.jsx(N,{className:"w-4 h-4 text-ged-secondary"}),"Nouveau rayon"]}),(0,a.jsxs)("button",{onClick:()=>x("classeur"),className:`context-menu-item w-full text-left ${h("classeur")?"":"opacity-50 cursor-not-allowed"}`,disabled:!h("classeur"),children:[a.jsx(N,{className:"w-4 h-4 text-ged-primary"}),"Nouveau classeur"]}),(0,a.jsxs)("button",{onClick:()=>x("dossier"),className:`context-menu-item w-full text-left ${h("dossier")?"":"opacity-50 cursor-not-allowed"}`,disabled:!h("dossier"),children:[a.jsx(N,{className:"w-4 h-4 text-purple-500"}),"Nouveau dossier"]}),(0,a.jsxs)("button",{onClick:()=>x("intercalaire"),className:`context-menu-item w-full text-left ${h("intercalaire")?"":"opacity-50 cursor-not-allowed"}`,disabled:!h("intercalaire"),children:[a.jsx(N,{className:"w-4 h-4 text-pink-500"}),"Nouvel intercalaire"]}),a.jsx("div",{className:"context-menu-separator"}),(0,a.jsxs)("button",{onClick:()=>{d(!1),t({type:"SHOW_MODAL",payload:{type:"upload"}})},className:`context-menu-item w-full text-left ${L?"":"opacity-50 cursor-not-allowed"}`,disabled:!L,children:[a.jsx(y,{className:"w-4 h-4 text-green-500"}),"Ajouter un document"]})]})]}),a.jsx("div",{className:"w-px h-6 bg-ged-border mx-2"}),a.jsx("button",{className:"toolbar-btn",onClick:()=>t({type:"SHOW_MODAL",payload:{type:"upload"}}),title:"Importer des fichiers",disabled:!L,children:a.jsx(v,{className:"w-5 h-5"})}),a.jsx("button",{className:"toolbar-btn",title:"T\xe9l\xe9charger",disabled:!e.selection.document,onClick:()=>{if(e.selection.document){let t=(0,I.km)(e.selection.document.id);window.open(t,"_blank")}},children:a.jsx(w,{className:"w-5 h-5"})}),a.jsx("button",{className:`toolbar-btn ${q?"text-red-500 hover:text-red-600 hover:bg-red-50":""}`,title:"Supprimer",disabled:!q,onClick:()=>{let{selection:s}=e,a=null,l="";s.document?(a=s.document,l="document"):s.intercalaire?(a=s.intercalaire,l="intercalaire"):s.dossier?(a=s.dossier,l="dossier"):s.classeur?(a=s.classeur,l="classeur"):s.rayon?(a=s.rayon,l="rayon"):s.armoire&&(a=s.armoire,l="armoire"),a&&t({type:"SHOW_MODAL",payload:{type:"delete",data:{itemId:a.id,itemName:a.name,level:l}}})},children:a.jsx(k,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-px h-6 bg-ged-border mx-2"}),a.jsx("button",{className:"toolbar-btn",title:"Actualiser",onClick:s.refresh,children:a.jsx(C,{className:"w-5 h-5"})}),a.jsx("div",{className:"hidden md:block flex-1"})]}),a.jsx("div",{className:"w-full md:hidden mt-2",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-ged-text-muted"}),a.jsx("input",{type:"text",placeholder:"Rechercher dans la GED...",value:r,onChange:e=>n(e.target.value),className:`input pl-9 pr-10 py-2.5 w-full text-base ${e.isSearchActive?"ring-2 ring-ged-secondary border-ged-secondary":""}`}),e.searchLoading&&a.jsx(S,{className:"absolute right-8 top-1/2 -translate-y-1/2 w-4 h-4 text-ged-secondary animate-spin"}),r&&a.jsx("button",{onClick:m,className:"absolute right-3 top-1/2 -translate-y-1/2 text-ged-text-muted hover:text-ged-text p-1",children:a.jsx(A,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("div",{className:"hidden md:flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-ged-text-muted"}),a.jsx("input",{type:"text",placeholder:"Rechercher...",value:r,onChange:e=>n(e.target.value),className:`input pl-9 pr-10 py-1.5 w-72 text-sm ${e.isSearchActive?"ring-2 ring-ged-secondary border-ged-secondary":""}`}),e.searchLoading&&a.jsx(S,{className:"absolute right-8 top-1/2 -translate-y-1/2 w-4 h-4 text-ged-secondary animate-spin"}),r&&a.jsx("button",{onClick:m,className:"absolute right-3 top-1/2 -translate-y-1/2 text-ged-text-muted hover:text-ged-text",children:a.jsx(A,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"w-px h-6 bg-ged-border"}),(0,a.jsxs)("div",{className:"flex items-center gap-1 bg-ged-surface-alt rounded-md p-0.5",children:[a.jsx("button",{onClick:()=>o("list"),className:`p-1.5 rounded transition-colors ${"list"===e.viewMode?"bg-white shadow-sm text-ged-primary":"text-ged-text-muted hover:text-ged-text"}`,title:"Vue liste",children:a.jsx($,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>o("grid"),className:`p-1.5 rounded transition-colors ${"grid"===e.viewMode?"bg-white shadow-sm text-ged-primary":"text-ged-text-muted hover:text-ged-text"}`,title:"Vue grille",children:a.jsx(D,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>o("details"),className:`p-1.5 rounded transition-colors ${"details"===e.viewMode?"bg-white shadow-sm text-ged-primary":"text-ged-text-muted hover:text-ged-text"}`,title:"Vue d\xe9taill\xe9e",children:a.jsx(_,{className:"w-4 h-4"})})]})]})]})]})}let L=h("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),q=h("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),F=h("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function E(){let{state:e,dispatch:t,actions:s}=(0,O.q)(),[r,n]=(0,l.useState)(!0),[i,d]=(0,l.useState)(!0),[c,o]=(0,l.useState)(!0),[m,x]=(0,l.useState)(null),h=e=>{s.filterByTag(e)},g=e=>{s.selectDocument(e),window.dispatchEvent(new CustomEvent("open-document-preview",{detail:e}))},j=(e,t)=>{e.stopPropagation(),s.removeFavorite(t)};return e.sidebarCollapsed?(0,a.jsxs)("aside",{className:"sidebar w-12 bg-white border-r border-ged-border flex-col items-center py-4 gap-3 hidden md:flex",children:[a.jsx("button",{className:"p-2 rounded-md text-ged-text-muted hover:text-ged-primary hover:bg-ged-surface-alt transition-colors",children:a.jsx(L,{className:"w-5 h-5"})}),a.jsx("button",{className:"p-2 rounded-md text-amber-500 hover:bg-amber-50 transition-colors",children:a.jsx(p,{className:"w-5 h-5"})}),a.jsx("button",{className:"p-2 rounded-md text-ged-text-muted hover:text-ged-primary hover:bg-ged-surface-alt transition-colors",children:a.jsx(u,{className:"w-5 h-5"})})]}):(0,a.jsxs)("aside",{className:"sidebar w-56 bg-white border-r border-ged-border flex-col hidden md:flex",children:[(0,a.jsxs)("div",{className:"panel-header flex items-center gap-2",children:[a.jsx(L,{className:"w-4 h-4"}),"Scripts"]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsxs)("button",{onClick:()=>n(!r),className:"flex items-center gap-1 w-full px-2 py-1 text-xs font-medium text-ged-text-muted uppercase tracking-wider hover:text-ged-primary transition-colors",children:[r?a.jsx(b,{className:"w-3 h-3"}):a.jsx(q,{className:"w-3 h-3"}),"Actions rapides"]}),r&&(0,a.jsxs)("div",{className:"mt-1 space-y-0.5",children:[(0,a.jsxs)("button",{onClick:()=>{x("search");let e=document.querySelector('input[placeholder="Rechercher..."]');e&&e.focus()},className:`tree-item w-full text-left text-sm ${"search"===m?"selected":""}`,children:[a.jsx(M,{className:"w-4 h-4 text-ged-primary"}),a.jsx("span",{className:"truncate",children:"Recherche avanc\xe9e"})]}),(0,a.jsxs)("button",{onClick:()=>{x("recent"),s.search("")},className:`tree-item w-full text-left text-sm ${"recent"===m?"selected":""}`,children:[a.jsx(F,{className:"w-4 h-4 text-ged-secondary"}),a.jsx("span",{className:"truncate",children:"Documents r\xe9cents"})]})]})]}),a.jsx("div",{className:"border-t border-ged-border my-2"}),(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsxs)("button",{onClick:()=>d(!i),className:"flex items-center gap-1 w-full px-2 py-1 text-xs font-medium text-ged-text-muted uppercase tracking-wider hover:text-ged-primary transition-colors",children:[i?a.jsx(b,{className:"w-3 h-3"}):a.jsx(q,{className:"w-3 h-3"}),a.jsx(p,{className:"w-3 h-3 text-amber-500"}),"Favoris",e.favorites.length>0&&a.jsx("span",{className:"ml-auto text-xs bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded-full",children:e.favorites.length})]}),i&&a.jsx("div",{className:"mt-1 space-y-0.5",children:0===e.favorites.length?a.jsx("div",{className:"px-2 py-3 text-xs text-ged-text-muted text-center",children:"Aucun favori"}):e.favorites.map(e=>(0,a.jsxs)("button",{onClick:()=>g(e),className:"tree-item w-full text-left text-sm group",children:[a.jsx(p,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),a.jsx("span",{className:"truncate flex-1",children:e.name}),a.jsx("button",{onClick:t=>j(t,e.id),className:"p-0.5 rounded opacity-0 group-hover:opacity-100 text-ged-text-muted hover:text-red-500 hover:bg-red-50 transition-all",title:"Retirer des favoris",children:a.jsx(A,{className:"w-3 h-3"})})]},e.id))})]}),a.jsx("div",{className:"border-t border-ged-border my-2"}),(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsxs)("button",{onClick:()=>o(!c),className:"flex items-center gap-1 w-full px-2 py-1 text-xs font-medium text-ged-text-muted uppercase tracking-wider hover:text-ged-primary transition-colors",children:[c?a.jsx(b,{className:"w-3 h-3"}):a.jsx(q,{className:"w-3 h-3"}),"\xc9tiquettes"]}),c&&(0,a.jsxs)("div",{className:"mt-1 space-y-0.5",children:[e.loading.tags?a.jsx("div",{className:"flex items-center justify-center p-4",children:a.jsx(S,{className:"w-4 h-4 animate-spin text-ged-secondary"})}):0===e.availableTags.length?a.jsx("div",{className:"px-2 py-3 text-xs text-ged-text-muted text-center",children:"Aucune \xe9tiquette"}):e.availableTags.map(e=>(0,a.jsxs)("button",{onClick:()=>h(e.name),className:"tree-item w-full text-left text-sm justify-between group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),a.jsx("span",{className:"truncate",children:e.name})]}),a.jsx("span",{className:"text-xs bg-ged-surface-alt px-1.5 py-0.5 rounded-full text-ged-text-muted",children:e.count})]},e.name)),(0,a.jsxs)("button",{onClick:()=>t({type:"SHOW_MODAL",payload:{type:"manageTags"}}),className:"tree-item w-full text-left text-sm text-ged-text-muted hover:text-ged-primary",children:[a.jsx(f,{className:"w-4 h-4"}),a.jsx("span",{children:"G\xe9rer les \xe9tiquettes..."})]})]})]})]}),a.jsx("div",{className:"p-3 border-t border-ged-border bg-ged-surface/50",children:(0,a.jsxs)("div",{className:"text-xs text-ged-text-muted space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Connexion API"}),a.jsx("span",{className:`w-2 h-2 rounded-full ${e.apiConnected?"bg-green-500":"bg-red-500"}`})]}),a.jsx("div",{className:"text-[10px] opacity-75",children:e.apiConnected?"/volume1/GED":"D\xe9connect\xe9"})]})})]})}let T=h("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]),P=h("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),R=h("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),H=h("file-type",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M9 13v-.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5",key:"qbrxap"}]]),W=h("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),U=h("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),V=h("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),G=h("folder-input",[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]]),B=h("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Z=h("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),K=h("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),Y=h("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),X=["@eaDir","#recycle",".DS_Store","Thumbs.db","@tmp","#snapshot"];function J(e){return e.filter(e=>{let t=e.name.toLowerCase();return!X.some(e=>t===e.toLowerCase()||t.startsWith(e.toLowerCase()))})}let Q=e=>{if(!e)return a.jsx(T,{className:"w-4 h-4 text-gray-400"});let t=e.toLowerCase();return({pdf:a.jsx(P,{className:"w-4 h-4 text-red-500"}),jpg:a.jsx(R,{className:"w-4 h-4 text-blue-500"}),jpeg:a.jsx(R,{className:"w-4 h-4 text-blue-500"}),png:a.jsx(R,{className:"w-4 h-4 text-blue-500"}),gif:a.jsx(R,{className:"w-4 h-4 text-blue-500"}),webp:a.jsx(R,{className:"w-4 h-4 text-blue-500"}),doc:a.jsx(H,{className:"w-4 h-4 text-blue-600"}),docx:a.jsx(H,{className:"w-4 h-4 text-blue-600"}),xls:a.jsx(W,{className:"w-4 h-4 text-green-600"}),xlsx:a.jsx(W,{className:"w-4 h-4 text-green-600"}),zip:a.jsx(U,{className:"w-4 h-4 text-amber-600"}),rar:a.jsx(U,{className:"w-4 h-4 text-amber-600"})})[t]||a.jsx(T,{className:"w-4 h-4 text-gray-400"})},ee=e=>{if(!e)return a.jsx(T,{className:"w-12 h-12 text-gray-400"});let t=e.toLowerCase();return({pdf:a.jsx(P,{className:"w-12 h-12 text-red-500"}),jpg:a.jsx(R,{className:"w-12 h-12 text-blue-500"}),jpeg:a.jsx(R,{className:"w-12 h-12 text-blue-500"}),png:a.jsx(R,{className:"w-12 h-12 text-blue-500"}),gif:a.jsx(R,{className:"w-12 h-12 text-blue-500"}),webp:a.jsx(R,{className:"w-12 h-12 text-blue-500"}),doc:a.jsx(H,{className:"w-12 h-12 text-blue-600"}),docx:a.jsx(H,{className:"w-12 h-12 text-blue-600"}),xls:a.jsx(W,{className:"w-12 h-12 text-green-600"}),xlsx:a.jsx(W,{className:"w-12 h-12 text-green-600"}),zip:a.jsx(U,{className:"w-12 h-12 text-amber-600"}),rar:a.jsx(U,{className:"w-12 h-12 text-amber-600"})})[t]||a.jsx(T,{className:"w-12 h-12 text-gray-400"})};function et({item:e,onPreview:t}){let{state:s,dispatch:l,actions:r}=(0,O.q)(),n=r.isFavorite(e.id),i=e.tags&&0!==e.tags.length?e.tags.slice(0,3).map(e=>{let t=s.availableTags.find(t=>t.name===e);return{name:e,color:t?.color||"#3b82f6"}}):[],d=e.tags&&e.tags.length>3;return(0,a.jsxs)("div",{className:"list-item group cursor-pointer hover:bg-ged-surface",onClick:()=>{"document"===e.type&&t(e)},children:["document"===e.type?Q(e.extension):a.jsx(V,{className:"w-4 h-4 text-ged-accent"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"truncate text-sm font-medium",children:e.name}),e.match_type?.includes("filename")&&a.jsx("span",{className:"text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-medium flex-shrink-0",children:"Titre"}),e.match_type?.includes("content")&&a.jsx("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded font-medium flex-shrink-0",children:"Contenu"}),i.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[i.map(e=>a.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color},title:e.name},e.name)),d&&(0,a.jsxs)("span",{className:"text-[10px] text-ged-text-muted",children:["+",e.tags.length-3]})]})]}),a.jsx("div",{className:"text-xs text-ged-text-muted truncate",children:e.path})]}),a.jsx("span",{className:"text-xs bg-ged-surface-alt px-2 py-0.5 rounded text-ged-text-muted mr-2",children:e.type}),(0,a.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:["document"===e.type&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:t=>{t.stopPropagation(),n?r.removeFavorite(e.id):r.addFavorite(e)},className:`p-1 rounded hover:bg-ged-surface-alt ${n?"text-amber-500":"text-ged-text-muted hover:text-amber-500"}`,title:n?"Retirer des favoris":"Ajouter aux favoris",children:a.jsx(p,{className:`w-4 h-4 ${n?"fill-current":""}`})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),r.selectDocument(e),l({type:"SHOW_MODAL",payload:{type:"tags"}})},className:"p-1 rounded text-ged-text-muted hover:text-ged-accent hover:bg-ged-surface-alt",title:"\xc9tiquettes",children:a.jsx(u,{className:"w-4 h-4"})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),l({type:"SHOW_MODAL",payload:{type:"move",data:{itemId:e.id,itemName:e.name}}})},className:"p-1 rounded text-ged-text-muted hover:text-blue-500 hover:bg-blue-50",title:"D\xe9placer",children:a.jsx(G,{className:"w-4 h-4"})}),a.jsx("button",{onClick:t=>{t.stopPropagation();let a=(0,I.km)(e.id,s.activeUrl||void 0);window.open(a,"_blank")},className:"p-1 rounded text-ged-text-muted hover:text-ged-secondary hover:bg-ged-surface-alt",title:"T\xe9l\xe9charger",children:a.jsx(w,{className:"w-4 h-4"})})]}),a.jsx("button",{onClick:t=>{t.stopPropagation(),l({type:"SHOW_MODAL",payload:{type:"delete",data:{itemId:e.id,itemName:e.name,level:e.type}}})},className:"p-1 rounded text-ged-text-muted hover:text-red-500 hover:bg-red-50",title:"Supprimer",children:a.jsx(k,{className:"w-4 h-4"})})]})]})}function es({item:e,onPreview:t}){let{state:s,dispatch:l,actions:r}=(0,O.q)(),n=r.isFavorite(e.id);return(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 bg-white active:bg-ged-surface",onClick:()=>{"document"===e.type&&t(e)},children:["document"===e.type?Q(e.extension):a.jsx(V,{className:"w-5 h-5 text-ged-accent flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium text-sm truncate",children:e.name}),e.match_type?.includes("filename")&&a.jsx("span",{className:"text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-medium flex-shrink-0",children:"Titre"}),e.match_type?.includes("content")&&a.jsx("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded font-medium flex-shrink-0",children:"Contenu"})]}),a.jsx("div",{className:"text-xs text-ged-text-muted truncate",children:e.path})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:["document"===e.type&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:t=>{t.stopPropagation(),n?r.removeFavorite(e.id):r.addFavorite(e)},className:`p-2 rounded-full ${n?"text-amber-500":"text-ged-text-muted"}`,children:a.jsx(p,{className:`w-5 h-5 ${n?"fill-current":""}`})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),l({type:"SHOW_MODAL",payload:{type:"move",data:{itemId:e.id,itemName:e.name}}})},className:"p-2 rounded-full text-ged-text-muted hover:text-blue-500",children:a.jsx(G,{className:"w-5 h-5"})}),a.jsx("button",{onClick:t=>{t.stopPropagation();let a=(0,I.km)(e.id,s.activeUrl||void 0);window.open(a,"_blank")},className:"p-2 rounded-full text-ged-text-muted",children:a.jsx(w,{className:"w-5 h-5"})})]}),a.jsx(q,{className:"w-5 h-5 text-ged-border"})]})]})}function ea({title:e,items:t,selectedId:s,onSelect:l,loading:r=!1,emptyMessage:n="Aucun \xe9l\xe9ment",folderColor:i="text-ged-accent"}){return(0,a.jsxs)("div",{className:"flex flex-col min-w-[180px] max-w-[220px] border-r border-ged-border bg-white flex-shrink-0",children:[(0,a.jsxs)("div",{className:"column-header",children:[a.jsx("span",{children:e}),a.jsx("span",{className:"text-[10px] font-normal text-ged-text-muted",children:t.length})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:r?a.jsx("div",{className:"flex items-center justify-center p-4",children:a.jsx(S,{className:"w-5 h-5 animate-spin text-ged-secondary"})}):0===t.length?a.jsx("div",{className:"p-4 text-center text-sm text-ged-text-muted",children:n}):t.map(e=>(0,a.jsxs)("div",{onClick:()=>l(e),className:`list-item group ${s===e.id?"selected":""}`,children:["document"===e.type?Q(e.extension):a.jsx(V,{className:`w-4 h-4 ${s===e.id?"text-white":i}`}),a.jsx("span",{className:"flex-1 truncate text-sm",children:e.name}),a.jsx("button",{onClick:t=>{t.stopPropagation();let s=new CustomEvent("open-move-modal",{detail:{itemId:e.id,itemName:e.name}});window.dispatchEvent(s)},className:`p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity ${s===e.id?"text-white/70 hover:text-white hover:bg-white/20":"text-ged-text-muted hover:text-blue-500 hover:bg-blue-50"}`,title:"D\xe9placer",children:a.jsx(G,{className:"w-3 h-3"})}),void 0!==e.children_count&&e.children_count>0&&a.jsx(q,{className:`w-3 h-3 ${s===e.id?"text-white/70":"text-ged-text-muted"}`})]},e.id))})]})}function el(){let{state:e,actions:t,dispatch:s}=(0,O.q)(),{selection:r,armoires:n,rayons:i,classeurs:d,dossiers:c,intercalaires:o,documents:m,loading:x,apiConnected:h,apiChecking:u,isSearchActive:g,searchResults:j,searchLoading:f,viewMode:b}=e,[N,y]=(0,l.useState)(!1),v=function(){let[e,t]=(0,l.useState)(!1);return e}(),[w,k]=(0,l.useState)(0),C=J(n),A=J(i),$=J(d),D=J(c),_=J(o),I=J(m),z=J(j),[L,F]=(0,l.useState)(!1),E=_.length>0,T=[{id:"armoire",title:"ARMOIRE",color:"text-ged-accent"},{id:"rayon",title:"RAYON",color:"text-ged-secondary"},{id:"classeur",title:"CLASSEUR",color:"text-ged-primary"},{id:"dossier",title:"DOSSIER",color:"text-purple-500"},...E?[{id:"intercalaire",title:"INTERCALAIRE",color:"text-pink-500"}]:[],{id:"documents",title:"DOCUMENTS",color:"text-gray-600"}],R=()=>r.document||E&&r.intercalaire||!E&&r.dossier?T.length-1:E&&r.dossier?T.findIndex(e=>"intercalaire"===e.id):r.classeur?3:r.rayon?2:r.armoire?1:0,H=e=>{t.selectDocument(e),y(!0)};if(u)return a.jsx("div",{className:"flex-1 flex items-center justify-center bg-ged-surface-alt",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(S,{className:"w-8 h-8 animate-spin text-ged-secondary mx-auto mb-3"}),a.jsx("p",{className:"text-ged-text-muted",children:"Connexion \xe0 l'API..."})]})});if(!h)return a.jsx("div",{className:"flex-1 flex items-center justify-center bg-ged-surface-alt",children:(0,a.jsxs)("div",{className:"text-center max-w-md p-6",children:[a.jsx(B,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-ged-text mb-2",children:"API non connect\xe9e"}),a.jsx("p",{className:"text-ged-text-muted mb-4",children:"Impossible de se connecter \xe0 l'API GED. V\xe9rifiez que le conteneur Docker est lanc\xe9 sur votre NAS."}),a.jsx("code",{className:"block bg-ged-surface p-3 rounded text-sm text-left mb-4",children:"http://192.168.0.100:8001"}),a.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"R\xe9essayer"})]})});if(g)return v?(0,a.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden bg-ged-surface-alt",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 flex items-center justify-between px-4 py-3 bg-white border-b border-ged-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(M,{className:"w-5 h-5 text-ged-secondary"}),a.jsx("span",{className:"font-semibold text-sm text-ged-secondary",children:"R\xc9SULTATS"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-xs text-ged-text-muted",children:[z.length," r\xe9sultat(s)"]}),a.jsx("button",{onClick:t.clearSearch,className:"text-xs text-ged-secondary font-medium px-2 py-1 rounded hover:bg-ged-surface",children:"Effacer"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:f?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx(S,{className:"w-6 h-6 animate-spin text-ged-secondary"})}):0===z.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-ged-text-muted p-8",children:[a.jsx(M,{className:"w-16 h-16 mb-4 opacity-30"}),a.jsx("p",{className:"text-sm text-center",children:"Aucun r\xe9sultat trouv\xe9"})]}):a.jsx("div",{className:"divide-y divide-ged-border/50",children:z.map(e=>a.jsx(es,{item:e,onPreview:e=>{t.selectDocument(e),y(!0)}},e.id))})}),a.jsx(ed,{selection:r,hasIntercalaires:E,armoires:C,documents:I}),N&&r.document&&a.jsx(ei,{document:r.document,onClose:()=>y(!1)})]}):(0,a.jsxs)("div",{className:"flex-1 bg-white flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"column-header justify-between",children:[a.jsx("span",{children:"R\xc9SULTATS DE RECHERCHE"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-[10px] font-normal text-ged-text-muted",children:[z.length," r\xe9sultat(s)"]}),a.jsx("button",{onClick:t.clearSearch,className:"text-xs text-ged-secondary hover:underline",children:"Effacer"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:f?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx(S,{className:"w-6 h-6 animate-spin text-ged-secondary"})}):0===z.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-ged-text-muted p-8",children:[a.jsx(M,{className:"w-16 h-16 mb-4 opacity-30"}),a.jsx("p",{className:"text-sm text-center",children:"Aucun r\xe9sultat trouv\xe9"})]}):a.jsx("div",{className:"divide-y divide-ged-border/50",children:z.map(e=>a.jsx(et,{item:e,onPreview:e=>{t.selectDocument(e),y(!0)}},e.id))})}),N&&r.document&&a.jsx(eu,{document:r.document,onClose:()=>y(!1)})]});if(v){let s=T[w],l=R();return L?(0,a.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden bg-ged-surface-alt",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 flex items-center justify-between px-4 py-3 bg-white border-b border-ged-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(p,{className:"w-5 h-5 text-amber-500 fill-amber-500"}),a.jsx("span",{className:"font-semibold text-sm text-amber-600",children:"FAVORIS"})]}),a.jsx("button",{onClick:()=>F(!1),className:"text-xs text-ged-primary font-medium px-2 py-1 rounded hover:bg-ged-surface",children:"Retour"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:0===e.favorites.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-ged-text-muted p-8",children:[a.jsx(p,{className:"w-16 h-16 mb-4 opacity-30"}),a.jsx("p",{className:"text-sm text-center",children:"Aucun favori"}),(0,a.jsxs)("p",{className:"text-xs text-center mt-2",children:["Ajoutez des documents aux favoris",a.jsx("br",{}),"pour y acc\xe9der rapidement"]})]}):a.jsx("div",{className:"divide-y divide-ged-border/50",children:e.favorites.map(e=>a.jsx(es,{item:e,onPreview:e=>{t.selectDocument(e),y(!0)}},e.id))})}),a.jsx(ed,{selection:r,hasIntercalaires:E,armoires:C,documents:I}),N&&r.document&&a.jsx(ei,{document:r.document,onClose:()=>y(!1)})]}):(0,a.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden bg-ged-surface-alt",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 flex items-center justify-between px-2 py-2 bg-white border-b border-ged-border",children:[a.jsx("button",{onClick:()=>{w>0&&k(w-1)},disabled:0===w,className:`p-2 rounded-lg flex-shrink-0 w-10 ${0===w?"text-gray-300":"text-ged-primary active:bg-ged-surface"}`,children:a.jsx(Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"flex-1 text-center min-w-0 px-1",children:[a.jsx("div",{className:`font-semibold text-sm ${s?.color||""}`,children:s?.title}),a.jsx("div",{className:"text-xs text-ged-text-muted truncate text-center px-2",children:(()=>{let e=[r.armoire?.name,r.rayon?.name,r.classeur?.name,r.dossier?.name,E&&r.intercalaire?.name].filter(Boolean);return 0===e.length?"Accueil":e.length<=3?e.join(" > "):`${e[0]} > ... > ${e[e.length-1]}`})()})]}),a.jsx("button",{onClick:()=>{w<R()&&k(w+1)},disabled:w>=l,className:`p-2 rounded-lg flex-shrink-0 w-10 ${w>=l?"text-gray-300":"text-ged-primary active:bg-ged-surface"}`,children:a.jsx(q,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex-shrink-0 flex gap-1 px-4 py-2 bg-white border-b border-ged-border",children:T.map((e,t)=>a.jsx("button",{onClick:()=>t<=l&&k(t),className:`flex-1 h-1 rounded-full transition-colors ${t===w?"bg-ged-primary":t<=l?"bg-ged-border hover:bg-ged-text-muted":"bg-ged-surface"}`},e.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:(()=>{switch(s?.id){case"armoire":return a.jsx(er,{items:C,selectedId:r.armoire?.id||null,onSelect:e=>{t.selectArmoire(e)},loading:x.armoires,emptyMessage:"Aucune armoire",folderColor:"text-ged-accent"});case"rayon":return a.jsx(er,{items:A,selectedId:r.rayon?.id||null,onSelect:e=>{t.selectRayon(e)},loading:x.rayons,emptyMessage:r.armoire?"Aucun rayon":"S\xe9lectionnez une armoire",folderColor:"text-ged-secondary"});case"classeur":return a.jsx(er,{items:$,selectedId:r.classeur?.id||null,onSelect:e=>{t.selectClasseur(e)},loading:x.classeurs,emptyMessage:r.rayon?"Aucun classeur":"S\xe9lectionnez un rayon",folderColor:"text-ged-primary"});case"dossier":return a.jsx(er,{items:D,selectedId:r.dossier?.id||null,onSelect:e=>{t.selectDossier(e)},loading:x.dossiers,emptyMessage:r.classeur?"Aucun dossier":"S\xe9lectionnez un classeur",folderColor:"text-purple-500"});case"intercalaire":return a.jsx(er,{items:_,selectedId:r.intercalaire?.id||null,onSelect:e=>{t.selectIntercalaire(e)},loading:x.intercalaires,emptyMessage:"Aucun intercalaire",folderColor:"text-pink-500"});case"documents":return a.jsx("div",{className:"flex-1 overflow-y-auto bg-white",children:x.documents?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx(S,{className:"w-6 h-6 animate-spin text-ged-secondary"})}):0===I.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-ged-text-muted p-8",children:[a.jsx(P,{className:"w-16 h-16 mb-4 opacity-30"}),a.jsx("p",{className:"text-sm text-center",children:"Aucun document"})]}):a.jsx("div",{className:"divide-y divide-ged-border/50",children:I.map(e=>a.jsx(en,{doc:e,isSelected:r.document?.id===e.id,onSelect:H},e.id))})});default:return null}})()}),a.jsx(ed,{selection:r,hasIntercalaires:E,armoires:C,documents:I}),N&&r.document&&a.jsx(ei,{document:r.document,onClose:()=>y(!1)})]})}return(0,a.jsxs)("div",{className:"flex flex-1 overflow-hidden bg-ged-surface-alt relative",children:[a.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden",children:(0,a.jsxs)("div",{className:"flex min-w-max h-full",children:[a.jsx(ea,{title:"ARMOIRE",items:C,selectedId:r.armoire?.id||null,onSelect:t.selectArmoire,loading:x.armoires,folderColor:"text-ged-accent"}),a.jsx(ea,{title:"RAYON",items:A,selectedId:r.rayon?.id||null,onSelect:t.selectRayon,loading:x.rayons,emptyMessage:r.armoire?"Aucun rayon":"S\xe9lectionnez une armoire",folderColor:"text-ged-secondary"}),a.jsx(ea,{title:"CLASSEUR",items:$,selectedId:r.classeur?.id||null,onSelect:t.selectClasseur,loading:x.classeurs,emptyMessage:r.rayon?"Aucun classeur":"S\xe9lectionnez un rayon",folderColor:"text-ged-primary"}),a.jsx(ea,{title:"DOSSIER",items:D,selectedId:r.dossier?.id||null,onSelect:t.selectDossier,loading:x.dossiers,emptyMessage:r.classeur?"Aucun dossier":"S\xe9lectionnez un classeur",folderColor:"text-purple-500"}),E&&a.jsx(ea,{title:"INTERCALAIRE",items:_,selectedId:r.intercalaire?.id||null,onSelect:t.selectIntercalaire,loading:x.intercalaires,emptyMessage:"S\xe9lectionnez un intercalaire",folderColor:"text-pink-500"}),(0,a.jsxs)("div",{className:"flex-1 bg-white flex flex-col min-w-[300px] flex-shrink-0",children:[(0,a.jsxs)("div",{className:"column-header",children:[a.jsx("span",{children:"DOCUMENTS"}),a.jsx("span",{className:"text-[10px] font-normal text-ged-text-muted",children:I.length})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:x.documents?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx(S,{className:"w-6 h-6 animate-spin text-ged-secondary"})}):0===I.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-ged-text-muted p-8",children:[a.jsx(P,{className:"w-16 h-16 mb-4 opacity-30"}),a.jsx("p",{className:"text-sm text-center",children:E&&!r.intercalaire?"S\xe9lectionnez un intercalaire":r.dossier||r.intercalaire?"Aucun document":"S\xe9lectionnez un dossier"})]}):a.jsx(ec,{documents:I,viewMode:b,selectedId:r.document?.id||null,onSelect:H})})]})]})}),N&&r.document&&a.jsx(eu,{document:r.document,onClose:()=>y(!1)})]})}function er({items:e,selectedId:t,onSelect:s,loading:l,emptyMessage:r,folderColor:n}){return l?a.jsx("div",{className:"flex-1 flex items-center justify-center bg-white",children:a.jsx(S,{className:"w-8 h-8 animate-spin text-ged-secondary"})}):0===e.length?(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center bg-white text-ged-text-muted p-8",children:[a.jsx(V,{className:"w-16 h-16 mb-4 opacity-30"}),a.jsx("p",{className:"text-sm text-center",children:r||"Aucun \xe9l\xe9ment"})]}):a.jsx("div",{className:"flex-1 overflow-y-auto bg-white",children:a.jsx("div",{className:"divide-y divide-ged-border/50",children:e.map(e=>(0,a.jsxs)("button",{onClick:()=>s(e),className:`w-full flex items-center gap-3 px-4 py-3 text-left transition-colors active:bg-ged-surface ${t===e.id?"bg-ged-primary text-white":"hover:bg-ged-surface"}`,children:[a.jsx(V,{className:`w-6 h-6 flex-shrink-0 ${t===e.id?"text-white":n}`}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:e.name}),void 0!==e.children_count&&(0,a.jsxs)("p",{className:`text-xs ${t===e.id?"text-white/70":"text-ged-text-muted"}`,children:[e.children_count," \xe9l\xe9ment(s)"]})]}),a.jsx(q,{className:`w-5 h-5 flex-shrink-0 ${t===e.id?"text-white/70":"text-ged-text-muted"}`})]},e.id))})})}function en({doc:e,isSelected:t,onSelect:s}){let{actions:l,dispatch:r}=(0,O.q)(),n=l.isFavorite(e.id);return(0,a.jsxs)("div",{onClick:()=>s(e),className:`w-full flex items-center gap-3 px-4 py-3 text-left transition-colors active:bg-ged-surface cursor-pointer ${t?"bg-ged-primary text-white":""}`,children:[Q(e.extension),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-medium truncate text-sm flex-1",children:e.name}),n&&a.jsx(p,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"})]}),(0,a.jsxs)("p",{className:`text-xs ${t?"text-white/70":"text-ged-text-muted"}`,children:[".",e.extension," • ",eh(e.size||0)]})]}),a.jsx("button",{onClick:t=>{t.stopPropagation(),r({type:"SHOW_MODAL",payload:{type:"move",data:{itemId:e.id,itemName:e.name}}})},className:`p-2 rounded-full ${t?"text-white/70 hover:bg-white/20":"text-ged-text-muted hover:bg-ged-surface"}`,children:a.jsx(G,{className:"w-5 h-5"})}),a.jsx(q,{className:`w-5 h-5 flex-shrink-0 ${t?"text-white/70":"text-ged-text-muted"}`})]})}function ei({document:e,onClose:t}){let{state:s,dispatch:l,actions:r}=(0,O.q)(),n=(0,I.km)(e.id,s.activeUrl||void 0),i=(0,I.pC)(e.id,s.activeUrl||void 0),d=r.isFavorite(e.id),c=(()=>{let t=e.extension?.toLowerCase()||"";return["jpg","jpeg","png","gif","webp","svg"].includes(t)?"image":"pdf"===t?"pdf":["txt","md","json","xml","csv","html","css","js","ts","py","sh"].includes(t)?"text":"none"})();return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 bg-black flex flex-col animate-fade-in",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-ged-primary to-ged-secondary text-white",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0 mr-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-medium truncate text-sm flex-1",children:e.name}),d&&a.jsx(p,{className:"w-4 h-4 text-amber-400 fill-amber-400 flex-shrink-0"})]}),(0,a.jsxs)("p",{className:"text-xs text-white/70",children:[".",e.extension," • ",eh(e.size||0)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{d?r.removeFavorite(e.id):r.addFavorite(e)},className:`p-2 rounded-full ${d?"bg-amber-500":"bg-white/20"} active:bg-white/30`,children:a.jsx(p,{className:`w-5 h-5 ${d?"fill-white":""}`})}),a.jsx("a",{href:n,download:!0,className:"p-2 rounded-full bg-white/20 active:bg-white/30",children:a.jsx(w,{className:"w-5 h-5"})}),a.jsx("button",{onClick:t,className:"p-2 rounded-full bg-white/20 active:bg-white/30",children:a.jsx(A,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{className:"flex-1 min-h-0 overflow-auto bg-black",style:{WebkitOverflowScrolling:"touch"},children:["image"===c&&a.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",children:a.jsx("img",{src:i,alt:e.name,className:"max-w-full max-h-full object-contain"})}),"pdf"===c&&(0,a.jsxs)("object",{data:`${i}#toolbar=1&navpanes=0&scrollbar=1&view=FitH`,type:"application/pdf",className:"w-full h-full min-h-[70vh]","aria-label":e.name,children:[a.jsx("iframe",{src:`${i}#toolbar=1&navpanes=0&scrollbar=1&view=FitH`,className:"w-full h-full min-h-[70vh] border-0",title:e.name,allowFullScreen:!0}),(0,a.jsxs)("div",{className:"p-4 text-center text-white",children:[a.jsx("p",{className:"mb-2",children:"Le PDF ne peut pas \xeatre affich\xe9 ici."}),a.jsx("a",{href:i,target:"_blank",rel:"noreferrer",className:"underline",children:"Ouvrir dans un nouvel onglet"})]})]}),"text"===c&&a.jsx("iframe",{src:i,className:"w-full h-full min-h-[70vh] bg-white border-0",title:e.name,allowFullScreen:!0}),"none"===c&&(0,a.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-white p-8",children:[ee(e.extension),a.jsx("p",{className:"mt-4 text-lg font-medium",children:e.name}),a.jsx("p",{className:"text-white/70 mb-6",children:"Aper\xe7u non disponible"}),a.jsx("a",{href:n,download:!0,className:"px-6 py-3 bg-white text-ged-primary font-medium rounded-lg active:bg-gray-100",children:"T\xe9l\xe9charger"})]})]})]})}function ed({selection:e,hasIntercalaires:t,armoires:s,documents:l}){let{state:r}=(0,O.q)(),n=e.document?{type:"Doc",name:e.document.name}:e.intercalaire?{type:"Int",name:e.intercalaire.name}:e.dossier?{type:"Dos",name:e.dossier.name}:e.classeur?{type:"Cls",name:e.classeur.name}:e.rayon?{type:"Ray",name:e.rayon.name}:e.armoire?{type:"Arm",name:e.armoire.name}:null;return(0,a.jsxs)("div",{className:"flex-shrink-0 bg-white border-t border-ged-border flex items-center px-3 gap-2 text-xs",style:{minHeight:"44px",paddingBottom:"max(8px, env(safe-area-inset-bottom))",paddingTop:"8px"},children:[(0,a.jsxs)("svg",{className:`w-4 h-4 flex-shrink-0 ${r.apiConnected?"text-emerald-500":"text-red-500"}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M5 12.55a11 11 0 0 1 14.08 0"}),a.jsx("path",{d:"M1.42 9a16 16 0 0 1 21.16 0"}),a.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),a.jsx("circle",{cx:"12",cy:"20",r:"1",fill:"currentColor"})]}),a.jsx("div",{className:"w-px h-5 bg-ged-border flex-shrink-0"}),n?(0,a.jsxs)(a.Fragment,{children:[a.jsx("span",{className:"px-1.5 py-0.5 bg-ged-surface-alt rounded text-[10px] uppercase text-ged-text-muted font-medium flex-shrink-0",children:n.type}),a.jsx("span",{className:"text-ged-primary font-medium truncate flex-1 min-w-0",children:n.name})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-ged-text-muted flex-1",children:[(0,a.jsxs)("span",{children:[s.length," armoires"]}),a.jsx("span",{children:"•"}),(0,a.jsxs)("span",{children:[l.length," docs"]})]})]})}function ec({documents:e,viewMode:t,selectedId:s,onSelect:l}){switch(t){case"grid":return a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 p-3",children:e.map(e=>a.jsx(eo,{doc:e,isSelected:s===e.id,onSelect:l},e.id))});case"details":return a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-ged-surface-alt border-b border-ged-border sticky top-0",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"text-left px-3 py-2 font-medium text-ged-text-muted",children:"Nom"}),a.jsx("th",{className:"text-left px-3 py-2 font-medium text-ged-text-muted w-24",children:"Type"}),a.jsx("th",{className:"text-left px-3 py-2 font-medium text-ged-text-muted w-24",children:"Taille"}),a.jsx("th",{className:"text-left px-3 py-2 font-medium text-ged-text-muted w-28",children:"Modifi\xe9"}),a.jsx("th",{className:"text-left px-3 py-2 font-medium text-ged-text-muted w-32",children:"\xc9tiquettes"}),a.jsx("th",{className:"w-24"})]})}),a.jsx("tbody",{className:"divide-y divide-ged-border/50",children:e.map(e=>a.jsx(em,{doc:e,isSelected:s===e.id,onSelect:l},e.id))})]})});default:return a.jsx("div",{className:"divide-y divide-ged-border/50",children:e.map(e=>a.jsx(ex,{doc:e,isSelected:s===e.id,onSelect:l},e.id))})}}function eo({doc:e,isSelected:t,onSelect:s}){let{state:l,dispatch:r,actions:n}=(0,O.q)(),i=n.isFavorite(e.id),d=e.tags&&0!==e.tags.length?e.tags.slice(0,3).map(e=>{let t=l.availableTags.find(t=>t.name===e);return{name:e,color:t?.color||"#3b82f6"}}):[];return(0,a.jsxs)("div",{onClick:()=>{s?s(e):n.selectDocument(e)},className:`group relative flex flex-col items-center p-3 rounded-lg border-2 transition-all cursor-pointer hover:shadow-md ${t?"border-ged-primary bg-ged-primary/5":"border-transparent hover:border-ged-border hover:bg-ged-surface"}`,children:[a.jsx("div",{className:"w-16 h-16 flex items-center justify-center mb-2",children:ee(e.extension)}),a.jsx("p",{className:"text-xs font-medium text-center truncate w-full",title:e.name,children:e.name}),a.jsx("p",{className:"text-[10px] text-ged-text-muted",children:eh(e.size||0)}),d.length>0&&a.jsx("div",{className:"flex items-center gap-0.5 mt-1",children:d.map(e=>a.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color},title:e.name},e.name))}),(0,a.jsxs)("div",{className:"absolute top-1 right-1 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:t=>{t.stopPropagation(),r({type:"SHOW_MODAL",payload:{type:"rename",data:{itemId:e.id,itemName:e.name,level:"document"}}})},className:"p-1 rounded bg-white shadow hover:bg-ged-surface",title:"Renommer",children:a.jsx(K,{className:"w-3 h-3 text-ged-secondary"})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),i?n.removeFavorite(e.id):n.addFavorite(e)},className:`p-1 rounded bg-white shadow hover:bg-ged-surface ${i?"text-amber-500":"text-ged-text-muted hover:text-amber-500"}`,title:i?"Retirer des favoris":"Ajouter aux favoris",children:a.jsx(p,{className:`w-3 h-3 ${i?"fill-current":""}`})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),n.selectDocument(e),r({type:"SHOW_MODAL",payload:{type:"tags"}})},className:"p-1 rounded bg-white shadow hover:bg-ged-surface",title:"\xc9tiquettes",children:a.jsx(u,{className:"w-3 h-3 text-ged-accent"})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),r({type:"SHOW_MODAL",payload:{type:"move",data:{itemId:e.id,itemName:e.name}}})},className:"p-1 rounded bg-white shadow hover:bg-ged-surface",title:"D\xe9placer",children:a.jsx(G,{className:"w-3 h-3 text-blue-500"})}),a.jsx("button",{onClick:t=>{t.stopPropagation();let s=(0,I.km)(e.id,l.activeUrl||void 0);window.open(s,"_blank")},className:"p-1 rounded bg-white shadow hover:bg-ged-surface",title:"T\xe9l\xe9charger",children:a.jsx(w,{className:"w-3 h-3 text-ged-secondary"})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),r({type:"SHOW_MODAL",payload:{type:"delete",data:{itemId:e.id,itemName:e.name,level:"document"}}})},className:"p-1 rounded bg-white shadow hover:bg-red-50",title:"Supprimer",children:a.jsx(k,{className:"w-3 h-3 text-red-500"})})]})]})}function em({doc:e,isSelected:t,onSelect:s}){let{state:l,dispatch:r,actions:n}=(0,O.q)(),i=n.isFavorite(e.id),d=e.tags&&0!==e.tags.length?e.tags.slice(0,4).map(e=>{let t=l.availableTags.find(t=>t.name===e);return{name:e,color:t?.color||"#3b82f6"}}):[];return(0,a.jsxs)("tr",{onClick:()=>{s?s(e):n.selectDocument(e)},className:`group cursor-pointer transition-colors ${t?"bg-ged-primary text-white":"hover:bg-ged-surface"}`,children:[a.jsx("td",{className:"px-3 py-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[Q(e.extension),a.jsx("span",{className:"truncate font-medium",title:e.name,children:e.name})]})}),a.jsx("td",{className:`px-3 py-2 uppercase text-xs ${t?"text-white/70":"text-ged-text-muted"}`,children:e.extension}),a.jsx("td",{className:`px-3 py-2 ${t?"text-white/70":"text-ged-text-muted"}`,children:eh(e.size||0)}),a.jsx("td",{className:`px-3 py-2 ${t?"text-white/70":"text-ged-text-muted"}`,children:(e=>{try{return new Date(e).toLocaleDateString("fr-FR")}catch{return"-"}})(e.modified_at)}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("div",{className:"flex items-center gap-1",children:d.map(e=>a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color},title:e.name},e.name))})}),a.jsx("td",{className:"px-3 py-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:t=>{t.stopPropagation(),r({type:"SHOW_MODAL",payload:{type:"rename",data:{itemId:e.id,itemName:e.name,level:"document"}}})},className:`p-1 rounded ${t?"hover:bg-white/20":"hover:bg-ged-surface-alt"}`,title:"Renommer",children:a.jsx(K,{className:`w-4 h-4 ${t?"text-white/70":"text-ged-secondary"}`})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),i?n.removeFavorite(e.id):n.addFavorite(e)},className:`p-1 rounded ${t?"hover:bg-white/20":"hover:bg-ged-surface-alt"} ${i?"text-amber-500":t?"text-white/70":"text-ged-secondary hover:text-amber-500"}`,title:i?"Retirer des favoris":"Ajouter aux favoris",children:a.jsx(p,{className:`w-4 h-4 ${i?"fill-current":""}`})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),n.selectDocument(e),r({type:"SHOW_MODAL",payload:{type:"tags"}})},className:`p-1 rounded ${t?"hover:bg-white/20":"hover:bg-ged-surface-alt"}`,title:"\xc9tiquettes",children:a.jsx(u,{className:`w-4 h-4 ${t?"text-white/70":"text-ged-accent"}`})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),r({type:"SHOW_MODAL",payload:{type:"move",data:{itemId:e.id,itemName:e.name}}})},className:`p-1 rounded ${t?"hover:bg-white/20":"hover:bg-ged-surface-alt"}`,title:"D\xe9placer",children:a.jsx(G,{className:`w-4 h-4 ${t?"text-white/70":"text-blue-500"}`})}),a.jsx("button",{onClick:t=>{t.stopPropagation();let s=(0,I.km)(e.id,l.activeUrl||void 0);window.open(s,"_blank")},className:`p-1 rounded ${t?"hover:bg-white/20":"hover:bg-ged-surface-alt"}`,title:"T\xe9l\xe9charger",children:a.jsx(w,{className:`w-4 h-4 ${t?"text-white/70":"text-ged-secondary"}`})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),r({type:"SHOW_MODAL",payload:{type:"delete",data:{itemId:e.id,itemName:e.name,level:"document"}}})},className:`p-1 rounded ${t?"hover:bg-white/20":"hover:bg-red-50"}`,title:"Supprimer",children:a.jsx(k,{className:`w-4 h-4 ${t?"text-white/70":"text-red-500"}`})})]})})]})}function ex({doc:e,isSelected:t,onSelect:s}){let{state:l,dispatch:r,actions:n}=(0,O.q)(),i=n.isFavorite(e.id),d=e.tags&&0!==e.tags.length?e.tags.slice(0,3).map(e=>{let t=l.availableTags.find(t=>t.name===e);return{name:e,color:t?.color||"#3b82f6"}}):[],c=e.tags&&e.tags.length>3;return(0,a.jsxs)("div",{onClick:()=>{s?s(e):n.selectDocument(e)},className:`list-item group ${t?"selected":""}`,children:[Q(e.extension),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"truncate text-sm font-medium",children:e.name}),d.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[d.map((e,t)=>a.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color},title:e.name},e.name)),c&&(0,a.jsxs)("span",{className:`text-[10px] ${t?"text-white/70":"text-ged-text-muted"}`,children:["+",e.tags.length-3]})]})]}),(0,a.jsxs)("div",{className:`text-xs ${t?"text-white/70":"text-ged-text-muted"}`,children:[".",e.extension," • ",eh(e.size||0)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:t=>{t.stopPropagation(),r({type:"SHOW_MODAL",payload:{type:"rename",data:{itemId:e.id,itemName:e.name,level:"document"}}})},className:`p-1 rounded ${t?"text-white/70 hover:text-white":"text-ged-text-muted hover:text-ged-secondary hover:bg-ged-surface-alt"}`,title:"Renommer",children:a.jsx(K,{className:"w-4 h-4"})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),i?n.removeFavorite(e.id):n.addFavorite(e)},className:`p-1 rounded ${i?"text-amber-500 hover:text-amber-600":t?"text-white/70 hover:text-amber-400":"text-ged-text-muted hover:text-amber-500 hover:bg-amber-50"}`,title:i?"Retirer des favoris":"Ajouter aux favoris",children:a.jsx(p,{className:`w-4 h-4 ${i?"fill-current":""}`})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),n.selectDocument(e),r({type:"SHOW_MODAL",payload:{type:"tags"}})},className:`p-1 rounded ${t?"text-white/70 hover:text-white":"text-ged-text-muted hover:text-ged-accent hover:bg-ged-surface-alt"}`,title:"\xc9tiquettes",children:a.jsx(u,{className:"w-4 h-4"})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),r({type:"SHOW_MODAL",payload:{type:"move",data:{itemId:e.id,itemName:e.name}}})},className:`p-1 rounded ${t?"text-white/70 hover:text-white":"text-ged-text-muted hover:text-blue-500 hover:bg-blue-50"}`,title:"D\xe9placer",children:a.jsx(G,{className:"w-4 h-4"})}),a.jsx("button",{onClick:t=>{t.stopPropagation();let s=(0,I.km)(e.id,l.activeUrl||void 0);window.open(s,"_blank")},className:`p-1 rounded ${t?"text-white/70 hover:text-white":"text-ged-text-muted hover:text-ged-secondary hover:bg-ged-surface-alt"}`,title:"T\xe9l\xe9charger",children:a.jsx(w,{className:"w-4 h-4"})}),a.jsx("button",{onClick:t=>{t.stopPropagation(),r({type:"SHOW_MODAL",payload:{type:"delete",data:{itemId:e.id,itemName:e.name,level:"document"}}})},className:`p-1 rounded ${t?"text-white/70 hover:text-white":"text-ged-text-muted hover:text-red-500 hover:bg-red-50"}`,title:"Supprimer",children:a.jsx(k,{className:"w-4 h-4"})})]})]})}function eh(e){return e<1024?`${e} o`:e<1048576?`${(e/1024).toFixed(1)} Ko`:`${(e/1048576).toFixed(1)} Mo`}function eu({document:e,onClose:t}){let{state:s,dispatch:l}=(0,O.q)(),r=(0,I.km)(e.id,s.activeUrl||void 0),n=(0,I.pC)(e.id,s.activeUrl||void 0),i=(e=>{if(!e)return"none";let t=e.toLowerCase();return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(t)?"image":"pdf"===t?"pdf":["txt","md","json","xml","csv","log","html","css","js","ts","py","sh"].includes(t)?"text":["doc","docx","xls","xlsx","ppt","pptx"].includes(t)?"office":"none"})(e.extension),d=()=>{window.open(r,"_blank")},c=e.tags&&0!==e.tags.length?e.tags.map(e=>{let t=s.availableTags.find(t=>t.name===e);return{name:e,color:t?.color||"#3b82f6"}}):[];return(0,a.jsxs)("div",{className:"absolute inset-0 z-50 flex",children:[a.jsx("div",{className:"w-1/2 bg-black/30 backdrop-blur-sm cursor-pointer",onClick:t}),(0,a.jsxs)("div",{className:"w-1/2 bg-white flex flex-col shadow-2xl animate-slide-in-right",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ged-border bg-gradient-to-r from-ged-primary to-ged-secondary",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/20 flex items-center justify-center",children:ep(e.extension)}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-medium text-sm text-white truncate",title:e.name,children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-white/70",children:[e.extension?.toUpperCase()," • ",eh(e.size||0)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>{l({type:"SHOW_MODAL",payload:{type:"rename",data:{itemId:e.id,itemName:e.name,level:"document"}}})},className:"p-2 rounded-md text-white/70 hover:text-white hover:bg-white/10 transition-colors",title:"Renommer",children:a.jsx(K,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{l({type:"SHOW_MODAL",payload:{type:"tags"}})},className:"p-2 rounded-md text-white/70 hover:text-white hover:bg-white/10 transition-colors",title:"\xc9tiquettes",children:a.jsx(u,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{window.open(n,"_blank")},className:"p-2 rounded-md text-white/70 hover:text-white hover:bg-white/10 transition-colors",title:"Ouvrir dans un nouvel onglet",children:a.jsx(Y,{className:"w-5 h-5"})}),a.jsx("button",{onClick:d,className:"p-2 rounded-md text-white/70 hover:text-white hover:bg-white/10 transition-colors",title:"T\xe9l\xe9charger",children:a.jsx(w,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),a.jsx("button",{onClick:t,className:"p-2 rounded-md text-white/70 hover:text-white hover:bg-white/10 transition-colors",title:"Fermer (\xc9chap)",children:a.jsx(A,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden bg-ged-surface-alt",children:["image"===i&&a.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",children:a.jsx("img",{src:n,alt:e.name,className:"max-w-full max-h-full object-contain rounded-lg shadow-lg"})}),"pdf"===i&&a.jsx("object",{data:n,type:"application/pdf",className:"w-full h-full",children:a.jsx("iframe",{src:`${n}#toolbar=1&navpanes=0&scrollbar=1`,className:"w-full h-full border-0",title:e.name})}),"text"===i&&a.jsx("iframe",{src:n,className:"w-full h-full bg-white border-0",title:e.name}),"office"===i&&(0,a.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center p-8",children:[a.jsx("div",{className:"w-24 h-24 mb-4 flex items-center justify-center bg-white rounded-xl shadow-lg",children:ee(e.extension)}),a.jsx("h4",{className:"font-medium text-ged-text mb-2",children:"Document Office"}),(0,a.jsxs)("p",{className:"text-sm text-ged-text-muted mb-4 text-center",children:["Les documents Office ne peuvent pas \xeatre pr\xe9visualis\xe9s directement.",a.jsx("br",{}),"T\xe9l\xe9chargez-le pour l'ouvrir."]}),(0,a.jsxs)("button",{onClick:d,className:"btn btn-primary",children:[a.jsx(w,{className:"w-4 h-4 mr-2"}),"T\xe9l\xe9charger"]})]}),"none"===i&&(0,a.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center p-8",children:[a.jsx("div",{className:"w-24 h-24 mb-4 flex items-center justify-center bg-white rounded-xl shadow-lg",children:ee(e.extension)}),a.jsx("h4",{className:"font-medium text-ged-text mb-2",children:"Aper\xe7u non disponible"}),a.jsx("p",{className:"text-sm text-ged-text-muted mb-4 text-center",children:"Ce type de fichier ne peut pas \xeatre pr\xe9visualis\xe9."}),(0,a.jsxs)("button",{onClick:d,className:"btn btn-primary",children:[a.jsx(w,{className:"w-4 h-4 mr-2"}),"T\xe9l\xe9charger le fichier"]})]})]}),a.jsx("div",{className:"px-4 py-3 border-t border-ged-border bg-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-3 text-xs text-ged-text-muted",children:(0,a.jsxs)("span",{children:["Modifi\xe9 le ",(e=>{try{return new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"-"}})(e.modified_at)]})}),c.length>0&&a.jsx("div",{className:"flex items-center gap-1",children:c.map(e=>a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium text-white",style:{backgroundColor:e.color},children:e.name},e.name))})]})})]})]})}let ep=e=>{if(!e)return a.jsx(T,{className:"w-5 h-5 text-white"});let t=e.toLowerCase();return({pdf:a.jsx(P,{className:"w-5 h-5 text-white"}),jpg:a.jsx(R,{className:"w-5 h-5 text-white"}),jpeg:a.jsx(R,{className:"w-5 h-5 text-white"}),png:a.jsx(R,{className:"w-5 h-5 text-white"}),gif:a.jsx(R,{className:"w-5 h-5 text-white"}),webp:a.jsx(R,{className:"w-5 h-5 text-white"}),doc:a.jsx(H,{className:"w-5 h-5 text-white"}),docx:a.jsx(H,{className:"w-5 h-5 text-white"}),xls:a.jsx(W,{className:"w-5 h-5 text-white"}),xlsx:a.jsx(W,{className:"w-5 h-5 text-white"}),zip:a.jsx(U,{className:"w-5 h-5 text-white"}),rar:a.jsx(U,{className:"w-5 h-5 text-white"})})[t]||a.jsx(T,{className:"w-5 h-5 text-white"})},eg=h("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),ej=h("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),ef=h("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);function eb(e){try{let t=new Date(e);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}catch{return e}}function eN(){let{state:e}=(0,O.q)(),t=(0,O.f)(),{selection:s,armoires:l,documents:n,apiConnected:i}=e,d=s.document?{type:"Document",name:s.document.name,size:function(e){if(0===e)return"0 o";let t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(1))} ${["o","Ko","Mo","Go"][t]}`}(s.document.size||0),date:eb(s.document.modified_at)}:s.intercalaire?{type:"Intercalaire",name:s.intercalaire.name,count:s.intercalaire.children_count||0,unit:"doc",date:eb(s.intercalaire.modified_at)}:s.dossier?{type:"Dossier",name:s.dossier.name,count:s.dossier.children_count||0,unit:"\xe9l\xe9ment",date:eb(s.dossier.modified_at)}:s.classeur?{type:"Classeur",name:s.classeur.name,count:s.classeur.children_count||0,unit:"dossier",date:eb(s.classeur.modified_at)}:s.rayon?{type:"Rayon",name:s.rayon.name,count:s.rayon.children_count||0,unit:"classeur",date:eb(s.rayon.modified_at)}:s.armoire?{type:"Armoire",name:s.armoire.name,count:s.armoire.children_count||0,unit:"rayon",date:eb(s.armoire.modified_at)}:null;return(0,a.jsxs)("footer",{className:"hidden md:flex h-8 bg-white border-t border-ged-border text-xs items-center px-3 gap-3",children:[a.jsx("div",{className:"flex items-center gap-1.5",title:i?`Connect\xe9: ${(0,I.qt)()}`:"Non connect\xe9",children:i?a.jsx(eg,{className:"w-3.5 h-3.5 text-emerald-500"}):a.jsx(ej,{className:"w-3.5 h-3.5 text-red-500"})}),a.jsx("div",{className:"w-px h-4 bg-ged-border"}),a.jsx("div",{className:"flex items-center gap-1 min-w-0 flex-shrink",children:t.length>0?(0,a.jsxs)(a.Fragment,{children:[t.length>2&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("span",{className:"text-ged-text-muted",children:"..."}),a.jsx(q,{className:"w-3 h-3 text-ged-border flex-shrink-0"})]}),t.slice(-2).map((e,t,s)=>(0,a.jsxs)(r().Fragment,{children:[t>0&&a.jsx(q,{className:"w-3 h-3 text-ged-border flex-shrink-0"}),a.jsx("span",{className:`truncate max-w-[100px] ${t===s.length-1?"text-ged-primary font-medium":"text-ged-text-muted"}`,children:e.name})]},e.id))]}):a.jsx("span",{className:"text-ged-text-muted",children:"Accueil"})}),a.jsx("div",{className:"flex-1"}),d?(0,a.jsxs)("div",{className:"flex items-center gap-3 text-ged-text",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"px-1.5 py-0.5 bg-ged-surface-alt rounded text-[10px] uppercase tracking-wide text-ged-text-muted",children:d.type}),a.jsx("span",{className:"text-ged-primary font-medium truncate max-w-[150px]",children:d.name})]}),"size"in d?(0,a.jsxs)("div",{className:"flex items-center gap-1 text-ged-text-muted",children:[a.jsx(ef,{className:"w-3 h-3"}),a.jsx("span",{children:d.size})]}):"count"in d?(0,a.jsxs)("span",{className:"text-ged-text-muted",children:[d.count," ",d.unit,d.count>1?"s":""]}):null,(0,a.jsxs)("div",{className:"hidden sm:flex items-center gap-1 text-ged-text-muted",children:[a.jsx(F,{className:"w-3 h-3"}),a.jsx("span",{children:d.date})]})]}):(0,a.jsxs)("div",{className:"flex items-center gap-3 text-ged-text-muted",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(V,{className:"w-3.5 h-3.5 text-ged-accent"}),a.jsx("span",{children:l.length})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(P,{className:"w-3.5 h-3.5 text-ged-secondary"}),a.jsx("span",{children:n.length})]})]})]})}let ey=h("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ev=h("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ew=h("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function ek(){let{state:e,dispatch:t}=(0,O.q)(),{modal:s}=e;if(!s.type)return null;let l=()=>{t({type:"HIDE_MODAL"})};return a.jsx("div",{className:"modal-overlay",onClick:e=>{e.target===e.currentTarget&&l()},children:(0,a.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:["create"===s.type&&a.jsx(eC,{onClose:l,data:s.data}),"rename"===s.type&&a.jsx(eS,{onClose:l,data:s.data}),"upload"===s.type&&a.jsx(eM,{onClose:l}),"delete"===s.type&&a.jsx(eA,{onClose:l,data:s.data}),"move"===s.type&&a.jsx(e$,{onClose:l,data:s.data}),"details"===s.type&&a.jsx(eD,{onClose:l}),"tags"===s.type&&a.jsx(e_,{onClose:l}),"manageTags"===s.type&&a.jsx(eO,{onClose:l})]})})}function eC({onClose:e,data:t}){let{state:s,actions:r}=(0,O.q)(),[n,i]=(0,l.useState)(""),[d,c]=(0,l.useState)(!1),[o,m]=(0,l.useState)(null),x=t?.itemType||"dossier",h={armoire:"armoire",rayon:"rayon",classeur:"classeur",dossier:"dossier",intercalaire:"intercalaire"},u=()=>{switch(x){case"rayon":return s.selection.armoire?.id||null;case"classeur":return s.selection.rayon?.id||null;case"dossier":return s.selection.classeur?.id||null;case"intercalaire":return s.selection.dossier?.id||null;default:return null}},p=async e=>{if(e.preventDefault(),n.trim()){c(!0),m(null);try{await r.createItem(u(),n.trim(),x)}catch(e){m(e instanceof Error?e.message:"Erreur"),c(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-ged-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-ged-secondary/10 rounded-lg",children:a.jsx(N,{className:"w-5 h-5 text-ged-secondary"})}),(0,a.jsxs)("h2",{className:"font-display font-semibold text-lg",children:["Cr\xe9er un(e) ",h[x]]})]}),a.jsx("button",{onClick:e,className:"btn-icon",children:a.jsx(A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("form",{onSubmit:p,className:"p-4 space-y-4",children:[o&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm",children:[a.jsx(ey,{className:"w-4 h-4"}),a.jsx("span",{children:o})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-ged-text mb-1.5",children:"Nom"}),a.jsx("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:`Nom de l'${h[x]}`,className:"input",autoFocus:!0,disabled:d})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[a.jsx("button",{type:"button",onClick:e,className:"btn btn-secondary",disabled:d,children:"Annuler"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!n.trim()||d,children:d?a.jsx(S,{className:"w-4 h-4 animate-spin"}):"Cr\xe9er"})]})]})]})}function eM({onClose:e}){let{state:t,actions:s}=(0,O.q)(),[r,n]=(0,l.useState)(!1),[i,d]=(0,l.useState)([]),[c,o]=(0,l.useState)(!1),[m,x]=(0,l.useState)(null),h=(e,t)=>{d(s=>s.map((s,a)=>a===e?{...s,customName:t}:s))},u=e=>{let t=e.match(/\.([^/.]+)$/);return t?t[1]:""},p=t.intercalaires&&t.intercalaires.length>0,g=t.selection.intercalaire||(p?null:t.selection.dossier),j=!!g,f=async()=>{if(g&&0!==i.length){o(!0),x(null);try{let t=i.map(({file:e,customName:t})=>{let s=u(e.name),a=`${t}.${s}`;return a!==e.name?new File([e],a,{type:e.type}):e});await s.uploadFiles(g.id,t),e()}catch(e){x(e instanceof Error?e.message:"Erreur"),o(!1)}}},b=e=>{d(t=>t.filter((t,s)=>s!==e))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-ged-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-ged-accent/10 rounded-lg",children:a.jsx(v,{className:"w-5 h-5 text-ged-accent"})}),a.jsx("h2",{className:"font-display font-semibold text-lg",children:"Importer des documents"})]}),a.jsx("button",{onClick:e,className:"btn-icon",disabled:c,children:a.jsx(A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[!j&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg text-amber-800 text-sm",children:[a.jsx(ey,{className:"w-4 h-4"}),a.jsx("span",{children:p?"S\xe9lectionnez un intercalaire pour importer":"S\xe9lectionnez un dossier pour importer"})]}),j&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 text-sm",children:[a.jsx(ev,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Import dans : ",a.jsx("strong",{children:g?.name})]})]}),m&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm",children:[a.jsx(ey,{className:"w-4 h-4"}),a.jsx("span",{children:m})]}),a.jsx("div",{className:`drop-zone ${r?"active":""} ${!j||c?"opacity-50 pointer-events-none":""}`,onDragOver:e=>{e.preventDefault(),n(!0)},onDragLeave:()=>n(!1),onDrop:e=>{e.preventDefault(),n(!1);let t=Array.from(e.dataTransfer.files).map(e=>({file:e,customName:e.name.replace(/\.[^/.]+$/,"")}));d(e=>[...e,...t])},children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3 text-center",children:[a.jsx(v,{className:"w-12 h-12 text-ged-text-muted"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:"Glissez-d\xe9posez vos fichiers"}),(0,a.jsxs)("p",{className:"text-sm text-ged-text-muted mt-1",children:["ou ",(0,a.jsxs)("label",{className:"text-ged-secondary cursor-pointer hover:underline",children:["parcourez",a.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:e=>{if(e.target.files){let t=Array.from(e.target.files).map(e=>({file:e,customName:e.name.replace(/\.[^/.]+$/,"")}));d(e=>[...e,...t])}},disabled:!j||c})]})]})]})]})}),i.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:[i.length," fichier(s) - Modifiez les noms si n\xe9cessaire"]}),a.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:i.map((e,t)=>{let s=u(e.file.name);return(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-ged-surface rounded-lg",children:[a.jsx(P,{className:"w-4 h-4 text-ged-text-muted flex-shrink-0"}),a.jsx("input",{type:"text",value:e.customName,onChange:e=>h(t,e.target.value),className:"flex-1 px-2 py-1 text-sm border border-ged-border rounded focus:outline-none focus:ring-2 focus:ring-ged-secondary focus:border-transparent",disabled:c}),(0,a.jsxs)("span",{className:"text-xs text-ged-text-muted flex-shrink-0",children:[".",s]}),a.jsx("button",{onClick:()=>b(t),className:"text-ged-text-muted hover:text-red-500 flex-shrink-0",disabled:c,children:a.jsx(A,{className:"w-4 h-4"})})]},t)})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[a.jsx("button",{onClick:e,className:"btn btn-secondary",disabled:c,children:"Annuler"}),a.jsx("button",{onClick:f,className:"btn btn-primary",disabled:0===i.length||!j||c,children:c?a.jsx(S,{className:"w-4 h-4 animate-spin"}):"Importer"})]})]})]})}function eS({onClose:e,data:t}){let{actions:s}=(0,O.q)(),[r,n]=(0,l.useState)(""),[i,d]=(0,l.useState)(!1),[c,o]=(0,l.useState)(null),m=t?.itemName||"",x=t?.itemId||"",h=t?.level||"document",u="document"===h,p=e=>{let t=e.match(/\.([^/.]+)$/);return t?t[1]:""},g=async t=>{if(t.preventDefault(),r.trim()&&x){d(!0),o(null);try{let t=u?`${r.trim()}.${p(m)}`:r.trim();await s.renameItem(x,t,h),e()}catch(e){o(e instanceof Error?e.message:"Erreur lors du renommage"),d(!1)}}},j=u?p(m):null;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-ged-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-ged-secondary/10 rounded-lg",children:a.jsx(P,{className:"w-5 h-5 text-ged-secondary"})}),a.jsx("h2",{className:"font-display font-semibold text-lg",children:"Renommer"})]}),a.jsx("button",{onClick:e,className:"btn-icon",disabled:i,children:a.jsx(A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("form",{onSubmit:g,className:"p-4 space-y-4",children:[c&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm",children:[a.jsx(ey,{className:"w-4 h-4"}),a.jsx("span",{children:c})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nom actuel"}),a.jsx("p",{className:"text-sm text-ged-text-muted bg-ged-surface px-3 py-2 rounded-lg",children:m})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"newName",className:"block text-sm font-medium mb-2",children:"Nouveau nom"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{id:"newName",type:"text",value:r,onChange:e=>n(e.target.value),className:"input flex-1",placeholder:"Entrez le nouveau nom",autoFocus:!0,disabled:i}),j&&(0,a.jsxs)("span",{className:"text-sm text-ged-text-muted",children:[".",j]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[a.jsx("button",{type:"button",onClick:e,className:"btn btn-secondary",disabled:i,children:"Annuler"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!r.trim()||r.trim()===(u?m.replace(/\.[^/.]+$/,""):m)||i,children:i?a.jsx(S,{className:"w-4 h-4 animate-spin"}):"Renommer"})]})]})]})}function eA({onClose:e,data:t}){let{actions:s}=(0,O.q)(),[r,n]=(0,l.useState)(!1),[i,d]=(0,l.useState)(null),c=async()=>{if(t?.itemId&&t?.level){n(!0),d(null);try{await s.deleteItem(t.itemId,t.level)}catch(e){d(e instanceof Error?e.message:"Erreur"),n(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-ged-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:a.jsx(ey,{className:"w-5 h-5 text-red-600"})}),a.jsx("h2",{className:"font-display font-semibold text-lg",children:"Confirmer la suppression"})]}),a.jsx("button",{onClick:e,className:"btn-icon",disabled:r,children:a.jsx(A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[i&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm",children:[a.jsx(ey,{className:"w-4 h-4"}),a.jsx("span",{children:i})]}),(0,a.jsxs)("p",{children:["Supprimer ",a.jsx("strong",{children:t?.itemName})," ? ",t?.level!=="document"&&"Tous les \xe9l\xe9ments contenus seront supprim\xe9s.",a.jsx("br",{}),a.jsx("span",{className:"text-red-600 text-sm",children:"Action irr\xe9versible."})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[a.jsx("button",{onClick:e,className:"btn btn-secondary",disabled:r,children:"Annuler"}),a.jsx("button",{onClick:c,className:"btn bg-red-600 text-white hover:bg-red-700",disabled:r,children:r?a.jsx(S,{className:"w-4 h-4 animate-spin"}):"Supprimer"})]})]})]})}function e$({onClose:e,data:t}){let{actions:s,state:r}=(0,O.q)(),[n,i]=(0,l.useState)(!1),[d,c]=(0,l.useState)(null),[o,m]=(0,l.useState)(null),[x,h]=(0,l.useState)([]),[u,p]=(0,l.useState)(!0),[g,j]=(0,l.useState)(""),f=(0,l.useMemo)(()=>{if(!g.trim())return x;let e=t=>t.reduce((t,s)=>{let a=s.name.toLowerCase().includes(g.toLowerCase()),l=s.children?e(s.children):[];return(a||l.length>0)&&t.push({...s,children:l}),t},[]);return e(x)},[x,g]),b=async()=>{if(t?.itemId&&o){i(!0),c(null);try{await s.moveItem(t.itemId,o),e()}catch(e){c(e instanceof Error?e.message:"Erreur lors du d\xe9placement"),i(!1)}}},y=({node:e,level:s=0})=>{let l=t?.itemId!==e.id&&["armoire","rayon","classeur","dossier","intercalaire"].includes(e.type);return"document"===e.type?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:`flex items-center gap-2 p-2 rounded cursor-pointer ${o===e.id?"bg-ged-primary text-white":"hover:bg-ged-surface"}`,style:{paddingLeft:`${16*s+8}px`},onClick:()=>l&&m(e.id),children:[o===e.id&&a.jsx(ew,{className:"w-4 h-4"}),a.jsx("div",{className:"w-4 h-4 rounded-full bg-current opacity-20"})," ",a.jsx("span",{className:`text-sm ${l?"":"opacity-50"}`,children:e.name})]}),e.children&&e.children.map(e=>a.jsx(y,{node:e,level:s+1},e.id))]})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-ged-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(N,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("h2",{className:"font-display font-semibold text-lg",children:["D\xe9placer ",t?.itemName]})]}),a.jsx("button",{onClick:e,className:"btn-icon",disabled:n,children:a.jsx(A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-4 flex flex-col h-[500px]",children:[d&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm mb-4",children:[a.jsx(ey,{className:"w-4 h-4"}),a.jsx("span",{children:d})]}),a.jsx("p",{className:"mb-2 text-sm font-medium",children:"S\xe9lectionnez la destination :"}),(0,a.jsxs)("div",{className:"relative mb-3",children:[a.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",value:g,onChange:e=>j(e.target.value),placeholder:"Rechercher un dossier...",className:"w-full pl-9 pr-3 py-2 border border-ged-border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-ged-primary/20 focus:border-ged-primary"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto border border-ged-border rounded-lg p-2",children:u?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx(S,{className:"w-6 h-6 animate-spin text-ged-secondary"})}):0===f.length?a.jsx("div",{className:"flex flex-col items-center justify-center h-full text-ged-text-muted",children:a.jsx("p",{className:"text-sm",children:"Aucun dossier trouv\xe9"})}):f.map(e=>a.jsx(y,{node:e},e.id))}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx("button",{onClick:e,className:"btn btn-secondary",disabled:n,children:"Annuler"}),a.jsx("button",{onClick:b,className:"btn btn-primary",disabled:!o||n,children:n?a.jsx(S,{className:"w-4 h-4 animate-spin"}):"D\xe9placer"})]})]})]})}function eD({onClose:e}){let{state:t,dispatch:s}=(0,O.q)(),l=t.selection.document;return l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-ged-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-ged-secondary/10 rounded-lg",children:a.jsx(ev,{className:"w-5 h-5 text-ged-secondary"})}),a.jsx("h2",{className:"font-display font-semibold text-lg",children:"D\xe9tails"})]}),a.jsx("button",{onClick:e,className:"btn-icon",children:a.jsx(A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-ged-text-muted mb-1",children:"Nom"}),a.jsx("p",{className:"font-medium",children:l.name})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-ged-text-muted mb-1",children:"Extension"}),(0,a.jsxs)("p",{className:"font-medium",children:[".",l.extension]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-ged-text-muted mb-1",children:"Taille"}),(0,a.jsxs)("p",{className:"font-medium",children:[((l.size||0)/1024).toFixed(1)," Ko"]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-ged-text-muted mb-1",children:"Modifi\xe9"}),a.jsx("p",{className:"font-medium",children:(e=>{try{return new Date(e).toLocaleDateString("fr-FR")}catch{return e}})(l.modified_at)})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("p",{className:"text-ged-text-muted mb-1",children:"Chemin"}),a.jsx("p",{className:"font-mono text-xs bg-ged-surface-alt p-2 rounded",children:l.path})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-ged-text-muted",children:"\xc9tiquettes"}),a.jsx("button",{onClick:()=>s({type:"SHOW_MODAL",payload:{type:"tags"}}),className:"text-xs text-ged-secondary hover:underline",children:"Modifier"})]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:t.selectedItemTags.length>0?t.selectedItemTags.map(e=>{let s=t.availableTags.find(t=>t.name===e);return a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs text-white",style:{backgroundColor:s?.color||"#3b82f6"},children:e},e)}):a.jsx("span",{className:"text-ged-text-muted text-xs",children:"Aucune"})})]})]}),a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx("button",{onClick:e,className:"btn btn-secondary",children:"Fermer"})})]})]}):null}function e_({onClose:e}){let{state:t,actions:s,dispatch:r}=(0,O.q)(),[n,i]=(0,l.useState)(null),[d,c]=(0,l.useState)(!0),[o,m]=(0,l.useState)([]),x=t.selection.document;if(!x)return null;let h=async e=>{i(e);try{o.includes(e)?(await s.removeTagFromItem(x.id,e),m(t=>t.filter(t=>t!==e))):(await s.addTagToItem(x.id,e),m(t=>[...t,e]))}finally{i(null)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-ged-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-ged-accent/10 rounded-lg",children:a.jsx(u,{className:"w-5 h-5 text-ged-accent"})}),a.jsx("h2",{className:"font-display font-semibold text-lg",children:"\xc9tiquettes"})]}),a.jsx("button",{onClick:e,className:"btn-icon",children:a.jsx(A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("p",{className:"text-sm text-ged-text-muted truncate",children:["Document : ",a.jsx("span",{className:"font-medium text-ged-text",children:x.name})]}),d?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(S,{className:"w-6 h-6 animate-spin text-ged-secondary"})}):0===t.availableTags.length?(0,a.jsxs)("div",{className:"text-center py-8 text-ged-text-muted",children:[a.jsx(u,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"Aucune \xe9tiquette disponible"}),a.jsx("p",{className:"text-sm mt-1",children:'Cr\xe9ez des \xe9tiquettes depuis le menu "G\xe9rer les \xe9tiquettes"'})]}):a.jsx("div",{className:"space-y-2",children:t.availableTags.map(e=>{let t=o.includes(e.name),s=n===e.name;return(0,a.jsxs)("button",{onClick:()=>h(e.name),disabled:s,className:`w-full flex items-center gap-3 p-3 rounded-lg border transition-colors ${t?"border-ged-secondary bg-ged-secondary/5":"border-ged-border hover:border-ged-secondary/50"}`,children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),a.jsx("span",{className:"flex-1 text-left font-medium",children:e.name}),s?a.jsx(S,{className:"w-4 h-4 animate-spin"}):t?a.jsx(ew,{className:"w-4 h-4 text-ged-secondary"}):null]},e.name)})}),a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx("button",{onClick:e,className:"btn btn-secondary",children:"Fermer"})})]})]})}function eO({onClose:e}){let{state:t,actions:s}=(0,O.q)(),[r,n]=(0,l.useState)(""),[i,d]=(0,l.useState)("#3b82f6"),[c,o]=(0,l.useState)(!1),[m,x]=(0,l.useState)(null),[h,p]=(0,l.useState)(null),g=async e=>{if(e.preventDefault(),r.trim()){o(!0),p(null);try{await s.createTag(r.trim(),i),n("")}catch(e){p(e instanceof Error?e.message:"Erreur")}finally{o(!1)}}},j=async e=>{x(e);try{await s.deleteTag(e)}finally{x(null)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-ged-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-ged-accent/10 rounded-lg",children:a.jsx(u,{className:"w-5 h-5 text-ged-accent"})}),a.jsx("h2",{className:"font-display font-semibold text-lg",children:"G\xe9rer les \xe9tiquettes"})]}),a.jsx("button",{onClick:e,className:"btn-icon",children:a.jsx(A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("form",{onSubmit:g,className:"space-y-3",children:[h&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm",children:[a.jsx(ey,{className:"w-4 h-4"}),a.jsx("span",{children:h})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:r,onChange:e=>n(e.target.value),placeholder:"Nom de l'\xe9tiquette",className:"input flex-1",disabled:c}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!r.trim()||c,children:c?a.jsx(S,{className:"w-4 h-4 animate-spin"}):a.jsx(f,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["#ef4444","#f97316","#f59e0b","#84cc16","#22c55e","#10b981","#06b6d4","#3b82f6","#6366f1","#8b5cf6","#a855f7","#ec4899"].map(e=>a.jsx("button",{type:"button",onClick:()=>d(e),className:`w-6 h-6 rounded-full ${i===e?"ring-2 ring-offset-2 ring-ged-primary":""}`,style:{backgroundColor:e}},e))})]}),(0,a.jsxs)("div",{className:"border-t border-ged-border pt-4",children:[a.jsx("h3",{className:"text-sm font-medium text-ged-text-muted mb-3",children:"Existantes"}),0===t.availableTags.length?a.jsx("p",{className:"text-center py-4 text-ged-text-muted text-sm",children:"Aucune"}):a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.availableTags.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-ged-surface",children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),a.jsx("span",{className:"flex-1 font-medium",children:e.name}),a.jsx("span",{className:"text-xs text-ged-text-muted bg-white px-2 py-0.5 rounded-full",children:e.count}),a.jsx("button",{onClick:()=>j(e.name),disabled:m===e.name,className:"p-1 text-ged-text-muted hover:text-red-500",children:m===e.name?a.jsx(S,{className:"w-4 h-4 animate-spin"}):a.jsx(k,{className:"w-4 h-4"})})]},e.name))})]}),a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx("button",{onClick:e,className:"btn btn-secondary",children:"Fermer"})})]})]})}function eI(){return(0,a.jsxs)("div",{className:"h-[100dvh] flex flex-col overflow-hidden",children:[a.jsx(z,{}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden min-h-0",children:[a.jsx(E,{}),a.jsx("main",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:a.jsx(el,{})})]}),a.jsx(eN,{}),a.jsx(ek,{})]})}},5480:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/logan/Sites/ma-ged-perso-frontend/src/app/page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[819,292],()=>s(5094));module.exports=a})();